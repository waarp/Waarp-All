<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/configuration.apt at 2022-07-11

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Waarp Ftp Server &#x2013; </title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="http://www.waarp.fr" id="bannerLeft"><img src="images/waarp.jpg"  alt="Waarp Project"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-07-11</span>
           | <span id="projectVersion">Version: 3.6.2-jre8</span>
      </div>
      <div class="xright"><a href="http://www.waarp.fr/" class="externalLink" title="Waarp">Waarp</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Waarp Ftp</h5>
    <ul>
     <li class="none"><a href="index.html" title="Overview of Waarp FTP Server">Overview of Waarp FTP Server</a></li>
     <li class="none"><strong>Configuration of Waarp Ftp Server</strong></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="https://www.waarp.fr/" title="Waarp" class="poweredBy">
        <img class="poweredBy"  alt="Waarp" src="https://www.waarp.fr/i/logo.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="WaarpFtp_and_WaarpFtp-Simpleimpl_Configuration"></a>WaarpFtp and WaarpFtp-Simpleimpl Configuration</h2><section>
<h3><a name="How_to_configure_Waarp_Ftp_using_default_implementation"></a>How to configure Waarp Ftp using default implementation</h3>
<p>In the zip distribution <i>WaarpFtp-X.Y.Z-dist.zip</i> (available at Github for download), you will find an extra directory named: <i>src/main/config</i> where two examples files are: <i>config.xml</i> and <i>authent.xml</i>. Those two files are related to the simple implementation of the Ftp Server.</p>
<p>The first one (config.xml) specifies the general behavior:</p>
<ul>
<li>server password (for admin functions)</li>
<li>server port, home directory, bandwidth limitation</li>
<li>server special configuration like threads number, timeout of connection, deleteOnAbort, usenio, fastmd5, blocksize, rangeport and the localization of the authentfile (second file)</li></ul>
<p>The second one (authent.xml) is a simple authentication file containing user definition (user name, password, account, admin status).</p>
<p>These two files are for the simple implementation (which is a simple FtpServer without any special actions), and using a simple authentication mechanism (from authent.xml). The simple Ftp Server is included in the <i>WaarpFtp-Simpleimpl-X.Y.Z.jar</i> .</p>
<p>If you want to implement something different, here are the files you may want to re write. They can all be found in the <i>simpleimpl</i> sub project at <i>org.waarp.ftp.simpleimpl</i> package.</p>
<ul>
<li>the server startup itself : <i>SimpleGatewayFtpServer</i></li>
<li>the Configuration file : <i>config.FileBasedConfiguration</i>
<p>By default an XML file is used. If you want to use other ways to implement the load of the configuration, you can change this implementation by the one you want (for instance from a database).</p>
<p>If you want to include some others configurations properties and XML is ok for you, you can extend it to fit your needs.</p></li>
<li>the virtual Directory, File implementation : <i>file.FileBasedDir</i>, <i>file.FileBasedFile</i>
<p>For instance, if you want to implement File and Directory as content in a database, you will have to not use the <i>WaarpFtp-Filesystem-X.Y.Z.jar</i> package an to implement your own File and Directory representation.</p>
<p>If you are OK with real file and directory, then nothing has to be done.</p></li>
<li>the authentication system : <i>file.FileBasedAuth</i> and its associated <i>file.SimpleAuth</i>
<p>For instance, if you want to inherit authentication from a LDAP, you will have to implement your own extension of <i>org.waarp.ftp.filesystembased.FilesystemBasedFtpAuth</i> instead of this simple one.</p></li>
<li>then you have two classes that implements business actions on pre and post actions on transfer:
<ul>
<li><i>control.SimpleBusinessHandler</i> : for the control connection of FTP service</li>
<li><i>data.FileSystemBasedDataBusinessHandler</i> : for the data connection of FTP service</li></ul>
<p>By default, this classes does nothing except logging.</p></li></ul></section><section>
<h3><a name="How_to_run_Waarp_Ftp_using_default_implementation"></a>How to run Waarp Ftp using default implementation</h3>
<p>It can be started like:</p>
<p>java ... classpath and jvm settings ... <i>org.waarp.ftp.simpleimpl.SimpleGatewayFtpServer</i> <i>src/main/config/config.xml</i></p>
<p>Note that in the classpath you need :</p>
<ul>
<li>External jars:
<ul>
<li><a class="externalLink" href="http://netty.io/">Netty</a></li>
<li><a class="externalLink" href="http://commons.apache.org/io/">Apache-Common-IO</a></li>
<li><a class="externalLink" href="http://www.dom4j.org/">DOM4J</a></li>
<li><a class="externalLink" href="http://jaxen.codehaus.org/">Jaxen</a></li>
<li><a class="externalLink" href="http://www.slf4j.org/">SLF4J</a></li>
<li><a class="externalLink" href="http://logback.qos.ch/">Logback</a></li></ul></li>
<li>Waarp jars:
<ul>
<li><i>NettyExtension</i></li>
<li><i>WaarpDigest</i></li>
<li><i>WaarpCommon</i></li>
<li><i>WaarpFtp-Core</i> of course</li>
<li><i>WaarpFtp-Filesystem</i> probably, except if you want to implement virtual Directory and File in something different than true directories and files</li>
<li><i>WaarpFtp-Simpleimpl</i> if you are ok with the default implementation</li></ul></li></ul>
<p>Some of them can be replaced if you change the implementation (Common IO is optional, Dom4J and Jaxen are only used if XML configuration file is used, SLF4J and Logback could be replaced with other logger framework, see the <i>Waarp.common.logging</i> from <i>WaarpCommon</i> where JDK is also supported, others can easily be supported).</p>
<p>To shutdown the service, either you do a CTRL-C or better if Unix (but not IBM JDK)</p>
<div>
<pre>  kill -SIGUSR1 &lt;processID&gt;</pre></div>
<p>or even better you connect as an admin user and execute the special command:</p>
<div>
<pre>  internalshutdown &lt;password&gt;</pre></div>
<p>where the password is the one in the <i>config.xml</i> for admin actions.</p>
<p>For instance, using FTP Client from windows you have to type the command <i>quote</i> to pass a non standard command to the FTP Server.</p>
<div>
<pre>  &gt;quote internalshutdown &lt;password&gt;</pre></div>
<p>Note that this FTP Server can be used as a simple one, but also for more complicated cases. It is in the middle of a self FTP server (<i>simpleimpl</i> package) and a framework to implement its own FTP service, which is the main reason of this project since I've not found any other open source implementations allowing to have pre or post actions on transfers or commands.</p>
<p>Hope this helps a bit... If you have any questions, remarks, just ask!</p></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2009&#x2013;2022<a href="http://www.waarp.fr">Waarp</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
